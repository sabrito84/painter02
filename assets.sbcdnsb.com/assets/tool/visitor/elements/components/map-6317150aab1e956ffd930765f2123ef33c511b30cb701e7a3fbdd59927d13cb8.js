var appVisitor=appVisitor||{};appVisitor.ElementMap=function(){function t(t){this.$html=t}return t.prototype={getZoom:function(){return parseInt(this.$html.data("zoom"))},getScroll:function(){var t=this.$html.data("scroll");return t===undefined||!0===t},getFullAdress:function(){return this.$html.data("full-adress")},init:function(){var t=this,i=t.$html.data("google-maps-url");i&&utils.require([i],function(){t._init()})},_init:function(){var t={options:{zoom:this.getZoom()||15,scrollwheel:this.getScroll(),draggable:!DeviceQueries.isTactilDevice(),mapTypeId:google.maps.MapTypeId.ROADMAP}};!1===t.options.scrollwheel&&(t.options=$.extend({},t.options,{navigationControl:!1,scaleControl:!1})),this._initMap(t),DeviceQueries.isTactilDevice()&&1==this.markers.length&&this.$html.wrap('<a href="https://maps.apple.com/maps?q='+this.getFullAdress()+'">')},_initMap:function(t){this.map=new google.maps.Map(this.$html[0],t.options);var i=this;this._setMarkers(),this._setItinerary(),this._fitBounds(),this.$html.parent().find(".enlarge-map").show(),$("body").on("sb.containers.resizing",function(){setTimeout(function(){google.maps.event.trigger(i.map,"resize"),i._fitBounds()},100)})},_setMarkers:function(){this.bounds=new google.maps.LatLngBounds,this.markers=this.$html.data("markers")||[];var t=new google.maps.InfoWindow,i=this;$.each(this.markers,function(e,n){n.icon&&(n.icon={url:n.icon,scaledSize:new google.maps.Size(40,40)});var o={position:new google.maps.LatLng(n.position[0],n.position[1]),icon:n.icon,map:i.map};i._displayInfoWindow()&&(DeviceQueries.isTactilDevice()?o.content='<a style="outline:none;text-decoration:none;" href="https://maps.apple.com/maps?q='+n.full_street_address+'">'+n.content+"</a>":o.content=n.content),n.icon&&(o.icon=n.icon);n=new google.maps.Marker(o);i.bounds.extend(n.getPosition()),i._displayInfoWindow()&&google.maps.event.addListener(n,"click",function(){t.setContent(this.content),t.open(i.map,this)}),i.markers[e]=n})},_fitBounds:function(){1==this.markers.length?this.map.setCenter(this.markers[0].getPosition()):this.map.fitBounds(this.bounds)},_displayInfoWindow:function(){return!!this.$html.data("display-info-window")},_setItinerary:function(){}},t}();